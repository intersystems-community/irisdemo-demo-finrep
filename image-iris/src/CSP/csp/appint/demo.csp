<!DOCTYPE html>

<html>
	<head>

		<meta charset="UTF-8">
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<meta http-equiv="pragma" content="no-cache" />

		<title>InterSystems IRIS Multi-Model with Schema Migration Demo</title>

		<script language="javascript">

		var ip = window.location.hostname;

		function openWindows()
		{
			var time=1000;
			var callNumber=0
			var timeout = function () { return ++callNumber*time };

				/*
				A timeout between each opened tab is necessary for Safari.
				Otherwise, Safari will simply open all windows on a single tab.
				With the timeout, Safari will first block the popups. Once the user tells
				safari that it should allow popups, the user should be able to try opening all
				windows again and all the tabs will be opened, one every second, on a new tab.
				*/
				
				// Demo 4
				window_open('http://' + ip + ':10001/csp/appint/rest/data/corebanking.com.irisdemo.banksim.avroevent.NewCustomerAvroEvent/2')

				// Demo 3
				setTimeout("openWorkflow()", timeout());				

				// Demo 2:
				setTimeout("openMessageTrace()", timeout());

				setTimeout("openDataLookup()", timeout());
				
				setTimeout("openDataTransformation()", timeout());
				
				setTimeout("openBusinessProcess()", timeout());

				setTimeout("openDataStore()", timeout());
				
				setTimeout("openProduction()", timeout());


				// Demo 1:

				setTimeout("openSimulator()", timeout());

				setTimeout("openSchemaRegistry()", timeout());

				setTimeout("openKafkaControlCenter()", timeout());
				
			}

			function window_open(url)
			{
				var winReference = window.open();
				winReference.location = url;
				winReference.parent.focus();
			}

			/*
			function openKafkaControlCenter()
			{
				window_open('http://' + ip + ':9021/');
			}
			*/

			function openProduction()
			{
				window_open('EnsPortal.ProductionConfig.zen?$NAMESPACE=APPINT&IRISUserName=SuperUser&IRISPassword=sys');
			}

			function openBusinessProcess()
			{
				window_open('EnsPortal.BPLEditor.zen?NAMESPACE=APPINT&BP=Normalization.Process.bpl&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openDTLTransToCanonical()
			{
			
				window_open('EnsPortal.DTLEditor.zen?DT=Custom.Normalization.DTL.Trans.dtl&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openDTLTransToFCA()
			{
				window_open('EnsPortal.DTLEditor.zen?DT=Custom.FCAReport.DTL.PSD001.Msg.dtl&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openDTLPerfToCanonical()
			{
				window_open('EnsPortal.DTLEditor.zen?DT=Custom.Normalization.DTL.Perf.dtl&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openDataLookup()
			{
				window_open('/csp/appint/EnsPortal.LookupSettings.zen?LookupTable=ReasonForClosure.lut&$NAMESPACE=APPINT&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openMessageTrace()
			{
				window_open('EnsPortal.MessageViewer.zen?$NAMESPACE=APPINT&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openWorkflow()
			{
				window_open('_DeepSee.UserPortal.Workflow.zen?$NAMESPACE=APPINT&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openSQLExplorer()
			{
				
				window_open('/csp/sys/exp/%25CSP.UI.Portal.SQL.Home.zen?$NAMESPACE=APPINT&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openRecordMap()
			{
				
				window_open('/csp/appint/EnsPortal.RecordMapper.cls?MAP=Staging.RM.MortgageTrans&SHOWSAMPLE=1&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function openRESTService()
			{
				window_open('/csp/appint/rest/data/corebanking.com.irisdemo.banksim.avroevent.NewCustomerAvroEvent/2?IRISUserName=SuperUser&IRISPassword=sys')
			}
			
			function openCube()
			{
				//window_open('http://' + ip + ':10001/csp/appint/rest/data/corebanking.com.irisdemo.banksim.avroevent.NewCustomerAvroEvent/2')
			}

			function openBatchDashboard()
			{
				window_open('/csp/appint/_DeepSee.UserPortal.DashboardViewer.zen?DASHBOARD=FCA/FCA%20Reporting%20Monitoring.dashboard&IRISUserName=SuperUser&IRISPassword=sys')
			}

			function bubble1()
			{
				var time=1000;
				var callNumber=0
				var timeout = function () { return ++callNumber*time };

				setTimeout("openMessageTrace()", timeout());

				setTimeout("openSQLExplorer()", timeout());
				
				setTimeout("openDTLTransToFCA()", timeout());
				
				setTimeout("openDataLookup()", timeout());
				
				setTimeout("openDTLTransToCanonical()", timeout());
				
				setTimeout("openBusinessProcess()", timeout());
				
				setTimeout("openRecordMap()", timeout());

				setTimeout("openProduction()", timeout());
			}

			function bubble2()
			{
				moveTransactionAndAffordabilityFiles();
			}

			function bubble3()
			{
				var time=1000;
				var callNumber=0
				var timeout = function () { return ++callNumber*time };


				setTimeout("openBatchDashboard()", timeout());

				setTimeout("openSQLExplorer()", timeout());

				setTimeout("openMessageTrace()", timeout());
				
			}

			function bubble4()
			{
				var time=1000;
				var callNumber=0
				var timeout = function () { return ++callNumber*time };

				if (movePerformanceFiles())
				{
					setTimeout("openDataLookup()", timeout());

					setTimeout("openWorkflow()", timeout());

					setTimeout("openDTLPerfToCanonical()", timeout());

					setTimeout("openBatchDashboard()", timeout());
				}
			}

			function bubble5()
			{
				generatePSD001();

			}
			function bubble6(){
				console.log("Bubble 6")
			}
			function bubble7(){
				console.log("Bubble 7")
			}
			function bubble8(){
				console.log("Bubble 8")
			}

			function openInstructions()
			{
				var btn = document.getElementById('instructionsbtn');
				var instructions = document.getElementById('instructions');

				if (btn.value == 'Show Instructions')
				{
					btn.value = 'Hide Instructions';
					instructions.hidden=false;
				}
				else
				{
					btn.value = 'Show Instructions';
					instructions.hidden=true;
				}
			}

			function toggleImage()
			{
				var img = document.getElementById("demoimg")

				if(img.src.includes('detailed')){
					img.src = "landing-page.png"
				}else{
					img.src = "landing-page-detailed.png"
				}
			}

			function moveTransactionAndAffordabilityFiles()
			{
				// invoke server-side method Test
				var transCopyMsg = #server(IRISDemo.LandingPage.Utils.MoveFile("PSD001-TransactionData_2.2.csv", "/MortgageSystemFiles/Trans"))#;
				var affordCopyMsg = #server(IRISDemo.LandingPage.Utils.MoveFile("PSD001-AffordabilityData_2.2.csv", "/MortgageSystemFiles/Afford"))#;

				if(transCopyMsg === "1" && affordCopyMsg === "1")
				{
					alert("Transactional Data File (PSD001-TransactionData_2.2.csv) and Afordability Data File (PSD001-AffordabilityData_2.2.csv) copied over for processing")
					return true;
				}
				
				if(transCopyMsg !== 1)
				{
					alert(transCopyMsg);
				}
				
				if(affordCopyMsg !== 1)
				{
					alert(affordCopyMsg);
				}

				return false;
			}

			function movePerformanceFiles()
			{
				// invoke server-side method Test
				var perfCopyMsg = #server(IRISDemo.LandingPage.Utils.MoveAllFiles("/MortgageSystemFiles/Perf"))#;
				if(perfCopyMsg === "1")
				{
					alert("Mortgage System Performance files copied over for processing");
					return true;
				}

				alert(perfCopyMsg);
				return false;
			}

			function generatePSD001()
			{
				
				// Schedule ID 1 is PSD001 v2.2. It was created on IRISDemo.Installer during build time.
				// This scehdule is for the first quarter of 2020
				var resp = #server(IRISDemo.LandingPage.Utils.GenerateReportByScheduleId(1))#;
				if(resp === "1")
				{
					alert("Report PSD 001 is being generated for the first quarter of 2020...")
					return true;
				}
				
				alert(resp)

				return false;
			}

		</script>
		<style>
		.Button {
			font-family: Arial;
			font-size: 12px;
			font-weight: bold;
			color: darkblue;
			background-color: #FFFFFF;
			width: 200px;
			border-radius: 5px;
		}
		.Button:hover {
			color: #000000;
			background-color: #FFFFFF;
		}
		
		td.leftFormField
		{
			text-align: left; background-color: #eeeeee; padding: 5px;
		}

		
		</style>
	</head>

	<body >

		<!-- Image Map Generated by http://www.image-map.net/ -->
		<center>
			<img src="landing-page.png" usemap="#image-map" id="demoimg">
		</center>

		<map name="image-map">
			<area target="" alt="Bubble 1 Top" title="Bubble 1 Top" href="javascript:bubble1()" coords="28,503,329,675" shape="rect">
			<area target="" alt="Bubble 1 Bottom" title="Bubble 1 Bottom" href="javascript:bubble1()" coords="28,809,245,1065" shape="rect">
			<area target="" alt="Bubble 2 Top" title="Bubble 2 Top" href="javascript:bubble2()" coords="349,326,676,460" shape="rect">
			<area target="" alt="Bubble 2 Bottom" title="Bubble 2 Bottom" href="javascript:bubble2()" coords="400,817,756,1077" shape="rect">
			<area target="" alt="Bubble 3 Top" title="Bubble 3 Top" href="javascript:bubble3()" coords="721,506,1022,675" shape="rect">
			<area target="" alt="Bubble 4 Top" title="Bubble 4 Top" href="javascript:bubble4()" coords="1075,379,1472,511" shape="rect">
			<area target="" alt="Bubble 4 Bottom" title="Bubble 4 Bottom" href="javascript:bubble4()" coords="1194,809,1402,991" shape="rect">
			<area target="" alt="Bubble 5 Top" title="Bubble 5 Top" href="javascript:bubble5()" coords="1528,324,1829,498" shape="rect">
			<area target="" alt="Bubble 5 Bottom" title="Bubble 5 Bottom" href="javascript:bubble5()" coords="1594,814,1758,933" shape="rect">
			<area target="" alt="Bubble 6 Top" title="Bubble 6 Top" href="javascript:bubble6()" coords="1870,405,2204,539" shape="rect">
			<area target="" alt="Bubble 7 Top" title="Bubble 7 Top" href="javascript:bubble7()" coords="2257,324,2553,488" shape="rect">
			<area target="" alt="Bubble 7 Bottom" title="Bubble 7 Bottom" href="javascript:bubble7()" coords="2335,809,2492,931" shape="rect">
			<area target="" alt="Bubble 8 Top" title="Bubble 8 Top" href="javascript:bubble8()" coords="2596,347,2861,534" shape="rect">
		</map>
						
		<table width="100%" style="text-align: center;">
			<tr>
				<td><input ID="BTNIMG" type="button" class="Button" value="Toggle Detailed View" onclick="toggleImage()"/></td>
			</tr>
		</table>


		<script type="text/javascript" src="imageMapResizer.min.js"></script>

		<script language="javascript">
			var demoimg = document.getElementById('demoimg');

			demoimg.style.width="90%";

			imageMapResize();
		</script>

	</body>
</html>